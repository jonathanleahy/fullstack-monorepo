# [Sub-chapter Title]

<!--
=== SUB-CHAPTER GUIDELINES ===

Sub-chapters EXPAND on the main chapter page - they don't repeat it.

THE VALUE TEST: "Does this add NEW value that the main page didn't cover?"
If someone read the main page, what NEW insights do they get here?

THE "TEACH, DON'T SUMMARIZE" PRINCIPLE APPLIES HERE TOO:
A sentence or two is NOT enough when explaining complex concepts.
Every section must explain concepts THOROUGHLY with multiple paragraphs,
examples, and context. Readers may jump directly to this page without
reading the main chapter first - they should still be able to learn.

TYPES OF SUB-CHAPTERS:

| Position | Type | Purpose | Word Count |
|----------|------|---------|------------|
| 00 | Deep Dive: Foundations | EXPAND on core concept with nuances, edge cases, patterns | 1500-2500 |
| 01 | Deep Dive: The Problem | SHOW real code of painful approach, debugging scenarios | 1500-2500 |
| 02 | Deep Dive: Architecture | EXPLAIN how it works internally, design decisions | 1500-2500 |
| 03+ | Feature/Concept | TEACH specific capability with hands-on examples | 1500-2500 |
| Final | Summary | TIE everything together, show complete solution | 2000-3000 |

EXPLANATION DEPTH FOR SUB-CHAPTERS:
- Every concept: 2-4 sentences minimum, not just definitions
- Every code block: Explanation paragraph BEFORE and AFTER the code
- Every diagram: 2-3 sentences explaining what readers should notice
- Every table: Interpretation paragraph explaining the key patterns

THE "STANDALONE PAGE" TEST:
If someone lands on THIS page from a search engine, can they understand
the content without having read anything else? If no, add more context.

THE RELATIONSHIP TO MAIN PAGE:

| Main Page Says | Sub-chapter Explores |
|----------------|---------------------|
| "X is a thing that does Y" | How X works internally, edge cases, gotchas |
| "The problem is Z" | Real code showing Z, debugging at 2 AM |
| "Use X when..." | Decision trees, trade-offs, anti-patterns |

STRUCTURE FOR INTRO SUB-CHAPTERS (00-02):
- Start with story context (where we left off)
- Go DEEPER than the main page
- Include more code examples with thorough explanations
- Add "Did you know?" insights with context
- Connect to real-world scenarios
- End with bridge to next sub-chapter

STRUCTURE FOR FEATURE SUB-CHAPTERS (03+):
- Open with protagonist's situation
- Introduce feature with WWHB pattern (thoroughly explained)
- Show implementation with code + detailed explanation
- Include gotchas and best practices with examples
- Add exam tips
- End with key takeaways
-->

## [Protagonist] Continues the Journey

<!--
For 00-02: Pick up where the main page left off.
For 03+: Set up why this feature matters now.
-->

After understanding [what they learned in main page/previous sub-chapter], [Protagonist] was ready to go deeper.

"[Question that motivates this sub-chapter]?" [Protagonist] asked.

"[Response that sets up the learning]," [Mentor] explained.

---

## Going Deeper: [Main Concept of This Sub-chapter]

<!--
THOROUGH INTRODUCTION REQUIRED (200-400 words)

For sub-chapter 00: Expand on the core concept.
For sub-chapter 01: Show the painful code in detail.
For sub-chapter 02: Explain the architecture.
For sub-chapter 03+: Introduce the specific feature.

This section should:
1. Provide enough context that someone who skipped the main page can follow
2. Explain what makes this sub-chapter's content valuable
3. Set up the "why should I care?" motivation
-->

### What the Main Page Introduced

The main page explained that [brief recap - 2-3 sentences providing context.
Include enough that a reader landing here from a search would understand
what we're building on.]

[Add a paragraph bridging from the main page to this deeper content.
What did the main page leave unsaid that we'll explore now?]

### What We'll Explore Here

[Before listing topics, add a paragraph explaining WHY these deeper aspects
matter. What can go wrong if you don't understand them? What opportunities
do they unlock?]

Now let's go deeper:

1. **[Deeper aspect 1]** - [2-3 sentences explaining why this matters and
   what questions it answers]

2. **[Deeper aspect 2]** - [2-3 sentences explaining why this matters and
   what you'll be able to do after understanding it]

3. **[Deeper aspect 3]** - [2-3 sentences explaining why this matters and
   how it connects to real-world usage]

---

## [First Deep Topic]

<!--
THOROUGH TOPIC EXPLORATION REQUIRED (400-600 words per major topic)

This is where the real learning happens.
Be specific. Use code. Show diagrams.

EVERY diagram needs 2-3 sentences of explanation.
EVERY code block needs before AND after explanation.
Don't assume anything is "obvious" to readers.
-->

"[Question from protagonist]?" [Character] asked.

"Let me show you," [Mentor] said, pulling up [console/terminal/diagram].

[Add 2-3 sentences setting up what we're about to see and what readers
should pay attention to. Don't just jump straight to the diagram.]

```mermaid
[Diagram showing the concept in detail]
```

[Explain the diagram in 3-4 sentences. Walk through the flow. Point out
what's important. Answer "what should I be looking at here?"]

### The Details

[Add 2-3 paragraphs of detailed explanation. Don't just say "here's how it
works" - explain WHY it works this way, what the alternatives were, and
what implications this design has for how you use the service.]

[Now set up the code example - what are we about to see and why?]

```[language]
// Code example showing the concept
// With comments explaining each part
// Include at least 15-20 lines for realistic examples
// Make comments educational, not just labels
```

[Explain the code in 2-3 sentences. What should readers notice? What's
the key pattern? How does this compare to what they might have expected?]

**Key insight:** [2-3 sentences explaining what most people miss about this.
This should be the "aha" moment that deepens understanding.]

---

## [Second Deep Topic]

<!--
THOROUGH TOPIC EXPLORATION REQUIRED (400-600 words)

Same standards as the first topic. Each major concept deserves
a full explanation with examples and context.
-->

[Add 2-3 sentences introducing this topic and why it matters.
Connect to what we just learned.]

### [Aspect 1]

[2-4 paragraphs of thorough explanation. Include:
- What this aspect is and why it exists
- How it works at a conceptual level
- A concrete example showing it in action
- What goes wrong if you get it wrong]

### [Aspect 2]

[2-4 paragraphs of thorough explanation. Include:
- What makes this aspect different from the first
- Specific situations where this matters
- Code or configuration example if relevant]

### Comparison Table

[Add a paragraph before the table explaining what readers should
look for and why this comparison matters.]

| Scenario | Approach | Why | Example |
|----------|----------|-----|---------|
| [Scenario 1] | [Approach] | [Reason with 1-2 sentences] | [Brief concrete example] |
| [Scenario 2] | [Approach] | [Reason with 1-2 sentences] | [Brief concrete example] |
| [Scenario 3] | [Approach] | [Reason with 1-2 sentences] | [Brief concrete example] |
| [Scenario 4] | [Approach] | [Reason with 1-2 sentences] | [Brief concrete example] |

[Add 2-3 sentences after the table interpreting the key patterns.
What should readers take away from this comparison?]

---

## [Third Deep Topic] (if needed)

<!--
Include as many sections as needed to fully cover the topic.
Each section should add new value.
-->

---

## The Gotcha (What Goes Wrong)

<!--
THOROUGH ERROR EXPLORATION REQUIRED (300-500 words)

Include a realistic mistake. This is where real learning happens.
Don't just show the error - EXPLAIN why it's a common trap and
how to recognize it in the future.
-->

[Protagonist] tried implementing what they learned, but hit a snag.

[Add a paragraph describing the specific situation - what were they trying
to do? This context helps readers recognize when they might make the same
mistake.]

"Why is [unexpected behavior]?" [Protagonist] asked.

[Mentor] looked at the [logs/code/config]. "[Detailed explanation of what
went wrong - don't just name the error, explain the mechanism]."

[Add 2-3 paragraphs explaining:
1. Why this error is a common trap
2. What the error message or symptom looks like
3. How to diagnose it when it happens]

**The lesson:** [2-3 sentences capturing the key insight from the mistake.
This should be memorable enough to help readers avoid the same trap.]

| What Seemed Right | What's Actually Right | Why |
|-------------------|-----------------------|-----|
| [Common assumption] | [Correct understanding] | [Explanation] |
| [Why it seemed right] | [Why the correct way works] | [Deeper explanation] |

[Add 2-3 sentences after the table explaining how to remember this
distinction. What mental model helps?]

---

## Hands-On: [Practical Exercise]

<!--
THOROUGH PRACTICAL EXERCISE REQUIRED (400-600 words)

Show the protagonist implementing what they learned.
Include complete, runnable code.

For each step:
1. Explain WHAT we're doing and WHY
2. Show the command or code
3. Explain what happened and what to look for
-->

[Protagonist] was ready to put this into practice.

[Add 2-3 sentences explaining what we're about to build and why this
exercise matters. What will readers be able to do after completing it?]

### Step 1: [What We're Doing]

[Explain in 2-3 sentences what this step accomplishes and why it's needed.]

```bash
$ [command]
```

[Explain what this command does and what output readers should expect.
Include sample output if helpful.]

### Step 2: [What We're Doing]

[Explain in 2-3 sentences what this step accomplishes.]

```bash
$ [command]
```

[Explain the result and what to verify.]

### Step 3: [Implementation Code]

[Set up what we're about to write and the key decisions we're making.]

```[language]
// Complete implementation
// With comments explaining decisions
// At least 20-30 lines for realistic examples
// Comments should teach, not just label
```

[Explain the code in 3-4 sentences. What are the key parts? What patterns
should readers notice? What could be customized for their use case?]

### Verifying It Works

[Explain how to verify the implementation is working correctly. What should
readers see? What would indicate a problem?]

"[Reaction to it working]," [Protagonist] said. "[Additional insight about
what they learned from the hands-on experience.]"

---

## Did You Know?

<!--
CRITICAL: "Did You Know?" is NOT a list of trivia facts.

Each item should be a MINI-LESSON that teaches something non-obvious.
The pattern is: State the fact → Why it matters → What to do about it → When this applies.

BAD EXAMPLE (just listing facts):
"Messages have a 256KB limit. Use S3 for larger payloads."

GOOD EXAMPLE (teaching):
"Messages have a 256KB limit - and this isn't arbitrary. AWS chose this limit because
larger messages would slow down the entire queue (more data to replicate across servers).
But here's the practical implication: if you're sending JSON, 256KB is about 250,000
characters - enough for most API payloads. For images, PDFs, or large data files, store
them in S3 and send just the S3 key through SQS. This pattern also makes your messages
cheaper (SQS charges per 64KB chunk) and your consumers more flexible (they can choose
whether to fetch the full payload)."

Each "Did you know?" should be 4-8 sentences, not 1-2.
-->

**Messages have a lifespan.** [Don't just state the default - explain what this MEANS.
Messages don't stay forever. By default, SQS keeps messages for 4 days. After that,
they're automatically deleted whether processed or not. This matters because if your
consumer breaks and nobody notices for 5 days, those messages are gone - no error,
no DLQ, just silent data loss. That's why monitoring queue depth is critical. Set up
CloudWatch alarms for ApproximateAgeOfOldestMessage so you know when messages are
piling up before they expire.]

**You can delay messages.** [Explain the WHY and HOW, not just that it exists. Want a
message to become available in 5 minutes? Set a delay. This is different from visibility
timeout - delay happens BEFORE a message is first available, visibility timeout happens
AFTER it's been received. Use delay for scheduled tasks (send this reminder in 10 minutes),
rate limiting (don't process more than X per minute), or exponential backoff when you
re-queue failed messages (wait 1 min, then 5 min, then 15 min). Maximum delay is 15 minutes,
which you can set per-message or as a queue default.]

**There's no way to peek at messages.** [Explain the implications. SQS isn't a database -
you can't query it or browse messages without receiving them. When you receive, you get up
to 10 random messages (in Standard queues). This design is intentional - it forces you to
build stateless consumers that don't care which message they get, which is exactly what
enables horizontal scaling. If you need to inspect messages for debugging, use a Dead Letter
Queue to capture failures, or temporarily log message contents before processing.]

---

## Exam Tips

<!--
For certification courses. Specific to THIS sub-chapter's content.
-->

**Key points for [Certification]:**

1. **[Concept from this sub-chapter]**: [What to remember]
2. **[Specific limit/number]**: [Value and why it matters]
3. **[Common confusion]**: [Clarification]

**Common exam patterns:**

> "[Question pattern from this topic]..."
> → Answer: [Solution based on this sub-chapter]

---

## Quick Reference

[Add 1-2 sentences explaining what this reference covers and when
readers might want to come back to it.]

| Concept | Definition | Example | When to Use |
|---------|------------|---------|-------------|
| [Term 1] | [Clear definition - 1-2 sentences] | [Concrete example] | [Situation] |
| [Term 2] | [Clear definition - 1-2 sentences] | [Concrete example] | [Situation] |
| [Term 3] | [Clear definition - 1-2 sentences] | [Concrete example] | [Situation] |
| [Term 4] | [Clear definition - 1-2 sentences] | [Concrete example] | [Situation] |

---

## Key Takeaways

<!--
CRITICAL: Key Takeaways are NOT bullet points with short summaries.

Each takeaway should be a PARAGRAPH that TEACHES, not a sentence that LISTS.
The reader should come away with UNDERSTANDING, not just awareness.

BAD EXAMPLE (listing):
"- Visibility timeout prevents duplicate processing
 - Set it to 6x your processing time
 - Use DLQs for poison messages"

GOOD EXAMPLE (teaching):
"1. **Visibility timeout prevents duplicate processing** - but only if set correctly.
   When a consumer receives a message, SQS hides it for the duration of the visibility
   timeout. If the consumer finishes and deletes the message, great. But if the consumer
   is still working when the timeout expires, the message becomes visible again and
   ANOTHER consumer picks it up. Now you have two workers processing the same message.
   This is the single most common SQS misconfiguration. The fix is simple: set visibility
   timeout to at least 6x your average processing time. If your Lambda runs for 30 seconds,
   set visibility to 180 seconds (3 minutes)."

Each takeaway should be 4-8 sentences, not 1-2.
-->

[Protagonist] reflected on what they learned:

1. **[Topic] - the key insight** - [Don't just state the insight - EXPLAIN it. What does
   this mean in practice? Why does it matter? What goes wrong if you ignore it? Give the
   reader enough context to actually UNDERSTAND, not just memorize. This should be 4-6
   sentences minimum, forming a complete mini-lesson on this point.]

2. **[Topic] - why it works this way** - [Connect the technical detail to the business
   reason. AWS made this design choice for a reason. What problem does it solve? What
   trade-off does it represent? When you explain the WHY, readers remember the WHAT. This
   should be 4-6 sentences that illuminate the reasoning behind the feature.]

3. **[Topic] - the practical implication** - [Turn knowledge into action. Now that readers
   understand this concept, what should they DO? Be specific: "Set X to Y in situation Z."
   Give concrete guidance they can apply immediately. Include a warning about what happens
   if they get it wrong. This should be 4-6 sentences of actionable guidance.]

4. **[Topic] - the common mistake** - [Describe what most people get wrong and why. This
   is often the most valuable takeaway because it prevents future pain. Explain the symptom
   they'll see, the cause, and the fix. This should be 4-6 sentences that save readers from
   debugging sessions.]

[Add a final paragraph synthesizing what changed in the protagonist's understanding. What
can they do now that they couldn't before? What question remains unanswered that leads to
the next sub-chapter?]

---

*Next: **[Next Sub-chapter Title]** - [2-3 sentences previewing what challenge
or learning awaits and why it matters.]*

